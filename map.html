<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>äº’å‹•åœ°åœ– - åé„‰æ•™è‚²è³‡æº</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<main class="map-main">
  <!-- å·¦å´è³‡è¨Šå¡ç‰‡ -->
  <section class="card" id="infoCard">
    <h2>äº’å‹•åœ°åœ–</h2>
    <p>è«‹é»æ“Šåœ°åœ–ä¸Šçš„å€åŸŸæŸ¥çœ‹æ•™è‚²è³‡æº</p>
    <div id="dataPanel"></div>
  </section>

  <!-- å³å´åœ°åœ– -->
  <section class="map-container" id="mapContainer">
    <img src="images/taiwan-map.png" alt="å°ç£åœ°åœ–">
  </section>
</main>

<!-- å°è¦½åˆ— -->
<nav class="navbar">
  <ul>
    <li><a href="index.html">ğŸ </a></li>
    <li><a href="data.html">ğŸ“Š</a></li>
    <li><a href="map.html" class="active">ğŸ—ºï¸</a></li>
  </ul>
</nav>

<script>
const areaData = {
  "åé„‰": { pos: { top: "60%", left: "30%" }, data: { "ç¶²è·¯è¦†è“‹ç‡": 40, "å‡å­¸ç‡": 55, "å¸«ç”Ÿæ¯”": "1:35" } },
  "éƒ½å¸‚": { pos: { top: "25%", left: "65%" }, data: { "ç¶²è·¯è¦†è“‹ç‡": 95, "å‡å­¸ç‡": 88, "å¸«ç”Ÿæ¯”": "1:18" } }
};

// ç”¢ç”Ÿè³‡è¨Š HTML
function createInfoHTML(area, info) {
  let html = `<h3>${area}</h3>`;
  for (const key in info) {
    const val = info[key];
    if (key === "å¸«ç”Ÿæ¯”") {
      const ratio = parseInt(val.split(':')[1]);
      html += `<p>${key}: ${val}</p>
               <div class="bar"><span style="width:${Math.min(ratio*2,100)}%"></span></div>`;
    } else if (typeof val === "number") {
      html += `<p>${key}</p>
               <div class="bar"><span style="width:${val}%">${val}%</span></div>`;
    } else {
      html += `<p>${key}: ${val}</p>`;
    }
  }
  return html;
}

window.addEventListener('DOMContentLoaded', () => {
  const infoCard = document.getElementById('infoCard');
  const dataPanel = document.getElementById('dataPanel');
  const mapContainer = document.getElementById('mapContainer');

  setTimeout(() => infoCard.classList.add('show'), 200);

  for (const area in areaData) {
    const btn = document.createElement('button');
    btn.classList.add('area-btn');
    btn.style.top = areaData[area].pos.top;
    btn.style.left = areaData[area].pos.left;
    btn.dataset.name = area;
    btn.title = area; // æ‰‹æ©Ÿ & æ»‘é¼  hover æç¤º
    mapContainer.appendChild(btn);

    btn.addEventListener('click', () => {
      const isActive = btn.classList.contains('active');
      document.querySelectorAll('.area-btn').forEach(b => b.classList.remove('active'));

      if (!isActive) {
        btn.classList.add('active');
        dataPanel.innerHTML = createInfoHTML(area, areaData[area].data);
      } else {
        dataPanel.innerHTML = '';
      }
    });
  }
});
</script>
</body>
</html>